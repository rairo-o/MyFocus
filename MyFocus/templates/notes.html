{% extends "base.html" %}
{% block content %}
<h2>الملاحظات</h2>

<div class="notes-list">
  {% for n in notes %}
    <article class="collapsible-card note-card" data-id="{{ n.id }}" aria-expanded="false">
      <header class="card-summary note-summary" tabindex="0">
        <div>
          <strong class="item-title">{{ n.title }}</strong>
          <div class="small">{{ n.created_at[:16] }}</div>
        </div>
        <div class="actions">
          <button class="btn-toggle ghost" aria-label="Toggle details">عرض</button>
        </div>
      </header>

      <div class="card-details note-details" aria-hidden="true">
        <p>{{ n.content }}</p>
        <div class="small" style="margin-top:8px">
          <a href="{{ url_for('edit_note', item_id=n.id) }}" class="ghost"> تعديل</a>
          <form style="display:inline" method="post" action="{{ url_for('delete_note', item_id=n.id) }}" onsubmit="return confirm('حذف الملاحظة؟')">
            <button type="submit" class="ghost">حذف</button>
          </form>
        </div>
      </div>
    </article>
  {% else %}
    <p>لا ملاحظات</p>
  {% endfor %}
</div>

<section class="card">
  <h3>إضافة ملاحظة</h3>
  <form method="post" action="{{ url_for('add_note') }}">
    <label>العنوان<br><input name="title" required></label>
    <label>المحتوى<br><textarea name="content"></textarea></label>
    <button type="submit">حفظ</button>
  </form>
</section>
{% endblock %}